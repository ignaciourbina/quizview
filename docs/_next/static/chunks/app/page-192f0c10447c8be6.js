(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{698:(e,t,s)=>{Promise.resolve().then(s.bind(s,6989))},6989:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>er});var r=s(5155),n=s(2115),i=s(6710),a=s(7607),o=s(4371),l=s(5300),c=s(9708),d=s(2085),u=s(9434);let m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:a=!1,...o}=e,l=a?c.DX:"button";return(0,r.jsx)(l,{className:(0,u.cn)(m({variant:n,size:i,className:s})),ref:t,...o})});x.displayName="Button";var p=s(5863);let f=n.forwardRef((e,t)=>{let{className:s,value:n,...i}=e;return(0,r.jsx)(p.bL,{ref:t,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:(0,r.jsx)(p.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});f.displayName=p.bL.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});h.displayName="Card";let g=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",s),...n})});g.displayName="CardHeader";let b=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});b.displayName="CardTitle";let v=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",s),...n})});v.displayName="CardDescription";let y=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("p-6 pt-0",s),...n})});y.displayName="CardContent";let j=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("flex items-center p-6 pt-0",s),...n})});function N(e){let{onFileAccepted:t,onFileRejected:s,isLoading:c=!1}=e,[d,u]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),[g,b]=(0,n.useState)(0),v=e=>{p(null),u(e),b(0);let r=new FileReader;r.onprogress=e=>{e.lengthComputable&&b(Math.round(100*e.loaded/e.total))},r.onload=r=>{var n;let i=null===(n=r.target)||void 0===n?void 0:n.result;if(i)t(i,e.name),b(100);else{let e="Failed to read file content.";p(e),s&&s(e),u(null),b(0)}},r.onerror=()=>{let e="Error reading file.";p(e),s&&s(e),u(null),b(0)},r.readAsText(e,"UTF-8")},j=(0,n.useCallback)((e,t)=>{if(p(null),u(null),b(0),t.length>0){let e=t[0].errors[0].message||"Invalid file type or size.";p(e),s&&s(e);return}e.length>0&&v(e[0])},[t,s]),{getRootProps:N,getInputProps:w,isDragActive:k}=(0,i.VB)({onDrop:j,accept:{"text/csv":[".csv"]},multiple:!1,maxSize:5242880});return(0,r.jsx)(h,{className:"w-full border-2 border-dashed border-primary/50 hover:border-primary transition-colors duration-200 bg-secondary/30 shadow-inner",children:(0,r.jsxs)(y,{className:"p-6 text-center",children:[(0,r.jsxs)("div",{...N(),className:"cursor-pointer p-10 rounded-lg ".concat(k?"bg-primary/10":""),children:[(0,r.jsx)("input",{...w()}),(0,r.jsx)(a.A,{className:"mx-auto h-12 w-12 text-primary"}),k?(0,r.jsx)("p",{className:"mt-4 text-lg font-semibold text-primary",children:"Drop the CSV file here..."}):(0,r.jsx)("p",{className:"mt-4 text-lg font-semibold text-foreground",children:"Drag & drop your Brightspace quiz CSV file here, or click to select file"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"CSV files only, max 5MB"})]}),m&&(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-center text-destructive",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{children:m})]}),c&&!d&&(0,r.jsx)("p",{className:"mt-4 text-sm text-primary animate-pulse",children:"Processing..."}),d&&!m&&(0,r.jsxs)("div",{className:"mt-6 p-4 border rounded-md bg-background text-left relative",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(l.A,{className:"h-6 w-6 text-primary"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:d.name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(d.size/1024).toFixed(2)," KB"]})]}),(0,r.jsx)(x,{variant:"ghost",size:"icon",onClick:()=>{u(null),p(null),b(0)},className:"absolute top-1 right-1 h-6 w-6","aria-label":"Remove file",children:(0,r.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})]}),g>0&&g<100&&!c&&(0,r.jsx)(f,{value:g,className:"w-full h-2 mt-2"}),100===g&&!c&&(0,r.jsx)("p",{className:"text-xs text-green-600 font-medium mt-2",children:"Upload complete!"}),c&&100===g&&(0,r.jsx)("p",{className:"mt-2 text-sm text-primary animate-pulse",children:"Parsing quiz..."})]})]})})}j.displayName="CardFooter";let w=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function k(e){let{className:t,variant:s,...n}=e;return(0,r.jsx)("div",{className:(0,u.cn)(w({variant:s}),t),...n})}var C=s(7454),A=s(154);let O=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(C.bL,{className:(0,u.cn)("grid gap-2",s),...n,ref:t})});O.displayName=C.bL.displayName;let q=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(C.q7,{ref:t,className:(0,u.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:(0,r.jsx)(C.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(A.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});q.displayName=C.q7.displayName;var S=s(6981),R=s(518);let T=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(S.bL,{ref:t,className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:(0,r.jsx)(S.C1,{className:(0,u.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(R.A,{className:"h-4 w-4"})})})});T.displayName=S.bL.displayName;var F=s(968);let M=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(F.b,{ref:t,className:(0,u.cn)(M(),s),...n})});L.displayName=F.b.displayName;let I=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});I.displayName="Textarea";let z=n.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});z.displayName="Input";var V=s(4063),B=s(3350),E=s(1462),_=s(5078),P=s(7270),Q=s(3223),D=s(1133),H=s(9311),W=s(5318);let K=e=>{switch(e){case"WR":return(0,r.jsx)(V.A,{className:"h-5 w-5 mr-2 text-primary"});case"SA":return(0,r.jsx)(B.A,{className:"h-5 w-5 mr-2 text-primary"});case"M":case"O":return(0,r.jsx)(E.A,{className:"h-5 w-5 mr-2 text-primary"});case"MC":return(0,r.jsx)(_.A,{className:"h-5 w-5 mr-2 text-primary"});case"TF":return(0,r.jsx)(P.A,{className:"h-5 w-5 mr-2 text-primary"});case"MS":return(0,r.jsx)(Q.A,{className:"h-5 w-5 mr-2 text-primary"});default:return(0,r.jsx)(D.A,{className:"h-5 w-5 mr-2 text-muted-foreground"})}},U=e=>{let{content:t}=e;return"string"==typeof t&&t?(0,r.jsx)("div",{className:"rendered-html-content",dangerouslySetInnerHTML:{__html:t}}):null};function X(e){var t,s,n,i,a,o,l;let{question:c,index:d}=e,u=K(c.type);return(0,r.jsxs)(h,{className:"mb-6 shadow-md hover:shadow-lg transition-shadow duration-200",children:[(0,r.jsxs)(g,{className:"flex flex-row items-start justify-between space-y-0 pb-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[u,(0,r.jsxs)(b,{className:"text-lg font-semibold",children:["Question ",d+1,c.title?": ".concat(c.title):""]})]}),(0,r.jsxs)(k,{variant:"secondary",children:[c.points," Point",1!==c.points?"s":""]})]}),(0,r.jsxs)(y,{children:[(0,r.jsx)(v,{className:"mb-4 text-base",children:(0,r.jsx)(U,{content:c.questionText})}),c.image&&(0,r.jsxs)("div",{className:"mb-4 p-2 border rounded-md bg-secondary flex items-center justify-center",children:[(0,r.jsx)(H.A,{className:"h-6 w-6 mr-2 text-muted-foreground"}),(0,r.jsxs)("span",{className:"text-muted-foreground italic",children:["Image placeholder: ",c.image]})]}),"WR"===c.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)(I,{placeholder:"Enter your response here...",defaultValue:c.initialText||"",rows:5,className:"mb-2",readOnly:!0}),c.answerKey&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[(0,r.jsx)("strong",{children:"Answer Key:"})," ",(0,r.jsx)(U,{content:c.answerKey})]})]}),"SA"===c.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)(z,{placeholder:"Enter your answer",className:"mb-2 read-only:bg-muted/50",style:{width:(null===(t=c.inputBox)||void 0===t?void 0:t.cols)?"".concat(.9*c.inputBox.cols,"ch"):"100%",minHeight:(null===(s=c.inputBox)||void 0===s?void 0:s.rows)?"".concat(1.8*c.inputBox.rows,"em"):"auto",maxWidth:"100%"},readOnly:!0}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,r.jsx)("strong",{children:"Correct Answer:"})," ",(0,r.jsx)(U,{content:c.bestAnswer})," (",c.evaluation,")"]})]}),"M"===c.type&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Choices"}),(0,r.jsx)("ul",{className:"space-y-2",children:null===(n=c.pairs)||void 0===n?void 0:n.map(e=>(0,r.jsx)("li",{className:"p-2 border rounded-md bg-secondary/50",children:(0,r.jsx)(U,{content:e.choiceText})},"choice-".concat(e.choiceNo)))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Matches"}),(0,r.jsx)("ul",{className:"space-y-2",children:null===(i=c.pairs)||void 0===i?void 0:i.map(e=>(0,r.jsx)("li",{className:"p-2 border rounded-md bg-secondary/50",children:(0,r.jsx)(U,{content:e.matchText})},"match-".concat(e.choiceNo)))})]}),c.scoring&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground md:col-span-2 pt-2",children:[(0,r.jsx)("strong",{children:"Scoring:"})," ",c.scoring]})]}),"MC"===c.type&&(0,r.jsx)(O,{className:"space-y-2",children:null===(a=c.options)||void 0===a?void 0:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2 p-2 border rounded-md hover:bg-secondary/30",children:[(0,r.jsx)(q,{value:e.text,id:"mc-".concat(d,"-").concat(t),disabled:!0}),(0,r.jsxs)(L,{htmlFor:"mc-".concat(d,"-").concat(t),className:"flex-1 cursor-default",children:[(0,r.jsx)(U,{content:e.text}),e.feedback&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground italic ml-4",children:(0,r.jsx)(U,{content:e.feedback})})]}),100===e.percent&&(0,r.jsx)(R.A,{className:"h-4 w-4 text-green-600"}),e.percent>0&&e.percent<100&&(0,r.jsxs)("span",{className:"text-xs text-orange-600 font-semibold",children:["(",e.percent,"%)"]}),e.percent<0&&(0,r.jsx)(W.A,{className:"h-4 w-4 text-red-600"})," "]},t))}),"TF"===c.type&&(0,r.jsxs)(O,{className:"space-y-2",children:[c.trueOption&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 p-2 border rounded-md hover:bg-secondary/30",children:[(0,r.jsx)(q,{value:"true",id:"tf-".concat(d,"-true"),disabled:!0}),(0,r.jsxs)(L,{htmlFor:"tf-".concat(d,"-true"),className:"flex-1 cursor-default",children:["True",c.trueOption.feedback&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground italic ml-4",children:(0,r.jsx)(U,{content:c.trueOption.feedback})})]}),100===c.trueOption.credit&&(0,r.jsx)(R.A,{className:"h-4 w-4 text-green-600"}),c.trueOption.credit<100&&c.trueOption.credit>=0&&(0,r.jsxs)("span",{className:"text-xs text-orange-600 font-semibold",children:["(",c.trueOption.credit,"%)"]}),c.trueOption.credit<0&&(0,r.jsx)(W.A,{className:"h-4 w-4 text-red-600"})]}),c.falseOption&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 p-2 border rounded-md hover:bg-secondary/30",children:[(0,r.jsx)(q,{value:"false",id:"tf-".concat(d,"-false"),disabled:!0}),(0,r.jsxs)(L,{htmlFor:"tf-".concat(d,"-false"),className:"flex-1 cursor-default",children:["False",c.falseOption.feedback&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground italic ml-4",children:(0,r.jsx)(U,{content:c.falseOption.feedback})})]}),100===c.falseOption.credit&&(0,r.jsx)(R.A,{className:"h-4 w-4 text-green-600"}),c.falseOption.credit<100&&c.falseOption.credit>=0&&(0,r.jsxs)("span",{className:"text-xs text-orange-600 font-semibold",children:["(",c.falseOption.credit,"%)"]}),c.falseOption.credit<0&&(0,r.jsx)(W.A,{className:"h-4 w-4 text-red-600"})]})]}),"MS"===c.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[null===(o=c.options)||void 0===o?void 0:o.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2 p-2 border rounded-md hover:bg-secondary/30",children:[(0,r.jsx)(T,{id:"ms-".concat(d,"-").concat(t),disabled:!0}),(0,r.jsxs)(L,{htmlFor:"ms-".concat(d,"-").concat(t),className:"flex-1 cursor-default",children:[(0,r.jsx)(U,{content:e.text}),e.feedback&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground italic ml-4",children:(0,r.jsx)(U,{content:e.feedback})})]}),e.weight>0&&(0,r.jsx)(R.A,{className:"h-4 w-4 text-green-600"}),e.weight<0&&(0,r.jsx)(W.A,{className:"h-4 w-4 text-red-600"})," "]},t)),c.scoring&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground pt-2",children:[(0,r.jsx)("strong",{children:"Scoring:"})," ",c.scoring]})]}),"O"===c.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:"Items (Correct Order):"}),(0,r.jsx)("ul",{className:"space-y-2",children:null===(l=c.items)||void 0===l?void 0:l.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start space-x-2 p-2 border rounded-md bg-secondary/50",children:[(0,r.jsxs)("span",{className:"font-semibold",children:[t+1,"."]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(U,{content:e.text}),e.feedback&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground italic ml-4",children:(0,r.jsx)(U,{content:e.feedback})})]})]},t))}),c.scoring&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[(0,r.jsx)("strong",{children:"Scoring:"})," ",c.scoring]})]})]}),(c.hint||c.feedback||void 0!==c.difficulty||c.id)&&(0,r.jsxs)(j,{className:"flex flex-col items-start text-sm text-muted-foreground space-y-1 pt-4 border-t",children:[void 0!==c.difficulty&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Difficulty:"})," ",c.difficulty,"/10"]}),c.hint&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Hint:"})," ",(0,r.jsx)(U,{content:c.hint})]}),c.feedback&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"General Feedback:"})," ",(0,r.jsx)(U,{content:c.feedback})]}),c.id&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Question ID:"})," ",c.id]})]})]})}let $=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e.trim())return t;let s=parseInt(e,10);return isNaN(s)?t:s},G=(e,t,s)=>e&&void 0!==e[t]&&null!==e[t]&&""!==e[t]?e[t]:s,J=e=>{let t=[],s="",r=!1;for(let n=0;n<e.length;n++){let i=e[n];if('"'===i){if(r&&n+1<e.length&&'"'===e[n+1]){s+='"',n++;continue}r=!r}else","!==i||r?s+=i:(t.push(s.trim()),s="")}return t.push(s.trim()),t.map(e=>e.startsWith('"')&&e.endsWith('"')?e.substring(1,e.length-1).replace(/""/g,'"'):e)},Y=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Z=n.forwardRef((e,t)=>{let{className:s,variant:n,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,u.cn)(Y({variant:n}),s),...i})});Z.displayName="Alert";let ee=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("h5",{ref:t,className:(0,u.cn)("mb-1 font-medium leading-none tracking-tight",s),...n})});ee.displayName="AlertTitle";let et=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,u.cn)("text-sm [&_p]:leading-relaxed",s),...n})});et.displayName="AlertDescription";var es=s(8376);function er(){let[e,t]=(0,n.useState)(null),[s,i]=(0,n.useState)(null),[a,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null);return(0,r.jsxs)("main",{className:"container mx-auto p-4 md:p-8",children:[(0,r.jsxs)("header",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-primary mb-2",children:"QuizView"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Preview your Brightspace Quiz CSV"})]}),(0,r.jsx)("section",{className:"mb-8",children:(0,r.jsx)(N,{onFileAccepted:(e,s)=>{o(!0),c(null),i(s);try{setTimeout(()=>{let s=function(e){let t=function(e){let t=[],s=0,r=!1;for(let n=0;n<e.length;n++){let i=e[n];if('"'===i){if(n+1<e.length&&'"'===e[n+1]){n++;continue}r=!r}"\n"!==i||r||(t.push(e.substring(s,n)),s=n+1)}return s<e.length&&t.push(e.substring(s)),t.map(e=>e.trim()).filter(e=>e.length>0&&!/^\s*$/.test(e))}(e),s=[],r=null,n=0;for(let e of t){n++;let t=J(e),l=G(t,0,"").toLowerCase(),c=G(t,1,""),d=G(t,2,""),u=G(t,3,""),m=G(t,4,""),x=G(t,5,"");if("newquestion"===l){if(r&&(r.type&&r.title&&r.questionText&&void 0!==r.points?s.push(r):console.warn("[Record ".concat(n,"] Skipping incomplete question started before this record. Missing type, title, text, or points. Title: ").concat(r.title||"N/A"))),!["WR","SA","M","MC","TF","MS","O"].includes(c)){console.warn("[Record ".concat(n,"] Unknown question type '").concat(c,"'. Skipping this 'NewQuestion' entry.")),r=null;continue}r={type:c,points:1};continue}if(r)try{switch(l){case"id":r.id=c;break;case"title":r.title=c;break;case"questiontext":r.questionText=c;break;case"points":r.points=$(c,1);break;case"difficulty":r.difficulty=$(c);break;case"image":r.image=c;break;case"hint":r.hint=c;break;case"feedback":var i,a,o;let e=!1;if("MC"===r.type&&(null===(i=r.options)||void 0===i?void 0:i.length)>0){let t=r;t.options&&(t.options[t.options.length-1].feedback=c),e=!0}else if("MS"===r.type&&(null===(a=r.options)||void 0===a?void 0:a.length)>0){let t=r;t.options&&(t.options[t.options.length-1].feedback=c),e=!0}else if("TF"===r.type){let t=r;t.falseOption&&(!t.trueOption||t.falseOption.definedLine&&t.trueOption.definedLine&&t.falseOption.definedLine>t.trueOption.definedLine)?(t.falseOption.feedback=c,e=!0):t.trueOption&&(t.trueOption.feedback=c,e=!0)}else if("O"===r.type&&(null===(o=r.items)||void 0===o?void 0:o.length)>0){let t=r;t.items&&(t.items[t.items.length-1].feedback=c),e=!0}e||(r.feedback=c);break;case"initialtext":r.initialText=c;break;case"answerkey":r.answerKey=c;break;case"inputbox":r.inputBox={rows:$(c,1),cols:$(d,40)};break;case"answer":if("SA"===r.type){let e=r;e.bestAnswer=d;let t=u.toLowerCase();e.evaluation="regexp"===t?"regexp":"sensitive"===t?"sensitive":"insensitive"}else console.warn("[Record ".concat(n,"] 'Answer' row encountered for non-SA question type: ").concat(r.type,". Ignoring."));break;case"scoring":"M"===r.type?r.scoring=c:"MS"===r.type?r.scoring=c:"O"===r.type?r.scoring=c:console.warn("[Record ".concat(n,"] 'Scoring' row encountered for incompatible question type: ").concat(r.type,". Ignoring."));break;case"choice":if("M"===r.type){let e=r;e.pairs||(e.pairs=[]);let t=$(c);if(t<=0){console.warn("[Record ".concat(n,"] Invalid Choice number '").concat(c,"' for Matching question '").concat(e.title,"'. Skipping choice."));continue}let s=e.pairs.find(e=>e.choiceNo===t);s?s.choiceText=d:e.pairs.push({choiceNo:t,choiceText:d,matchText:""})}else console.warn("[Record ".concat(n,"] 'Choice' row encountered for non-Matching question type: ").concat(r.type,". Ignoring."));break;case"match":if("M"===r.type){let e=r;e.pairs||(e.pairs=[]);let t=$(c);if(t<=0){console.warn("[Record ".concat(n,"] Invalid Match number '").concat(c,"' for Matching question '").concat(e.title,"'. Skipping match."));continue}let s=e.pairs.find(e=>e.choiceNo===t);s?s.matchText=d:(console.warn("[Record ".concat(n,"] Matching question '").concat(e.title,"' has Match row for non-existent Choice number ").concat(t,". Creating placeholder choice.")),e.pairs.push({choiceNo:t,choiceText:"[Choice ".concat(t," Placeholder]"),matchText:d}))}else console.warn("[Record ".concat(n,"] 'Match' row encountered for non-Matching question type: ").concat(r.type,". Ignoring."));break;case"option":if("MC"===r.type){let e=r;e.options||(e.options=[]),e.options.push({percent:$(c),text:d,htmlFlag:"html"===u.toLowerCase(),feedback:m||void 0,feedbackHtmlFlag:"html"===x.toLowerCase()})}else if("MS"===r.type){let e=r;e.options||(e.options=[]),e.options.push({weight:$(c,0),text:d,htmlFlag:"html"===u.toLowerCase(),feedback:m||void 0,feedbackHtmlFlag:"html"===x.toLowerCase()})}else console.warn("[Record ".concat(n,"] 'Option' row encountered for incompatible question type: ").concat(r.type,". Ignoring."));break;case"true":"TF"===r.type?r.trueOption={isTrue:!0,credit:$(c),feedback:d||void 0,htmlFlag:"html"===u.toLowerCase(),definedLine:n}:console.warn("[Record ".concat(n,"] 'True' row encountered for non-TF question type: ").concat(r.type,". Ignoring."));break;case"false":"TF"===r.type?r.falseOption={isTrue:!1,credit:$(c),feedback:d||void 0,htmlFlag:"html"===u.toLowerCase(),definedLine:n}:console.warn("[Record ".concat(n,"] 'False' row encountered for non-TF question type: ").concat(r.type,". Ignoring."));break;case"item":if("O"===r.type){let e=r;e.items||(e.items=[]),e.items.push({text:c,htmlFlag:"html"===d.toLowerCase(),feedback:u||void 0,feedbackHtmlFlag:"html"===x.toLowerCase()})}else console.warn("[Record ".concat(n,"] 'Item' row encountered for non-Ordering question type: ").concat(r.type,". Ignoring."));break;default:l&&""!==l.trim()&&console.log("[Record ".concat(n,"] Ignoring unrecognized row type or key: '").concat(l,"'"))}}catch(t){console.error("[Record ".concat(n,"] Error processing record: ").concat(e,". Error: ").concat(t instanceof Error?t.message:String(t)))}}if(r){let e=!0,t="";r.type&&r.title&&r.questionText&&void 0!==r.points?"M"===r.type&&(!r.pairs||0===r.pairs.length||r.pairs.some(e=>!e.choiceText||!e.matchText))?(e=!1,t="Matching question has no pairs, or some pairs are incomplete."):"MC"!==r.type||r.options&&0!==r.options.length?"TF"!==r.type||r.trueOption&&r.falseOption?"MS"!==r.type||r.options&&0!==r.options.length?"O"!==r.type||r.items&&0!==r.items.length?"SA"===r.type&&void 0===r.bestAnswer&&(e=!1,t="ShortAnswer question lacks a defined best answer."):(e=!1,t="Ordering question has no items."):(e=!1,t="MultiSelect question has no options."):(e=!1,t="TrueFalse question lacks true or false options definition."):(e=!1,t="MultipleChoice question has no options."):(e=!1,t="Missing required fields (type, title, text, or points)."),e?s.push(r):console.warn("Skipping last question (Title: ".concat(r.title||"N/A",") because it is incomplete or invalid. Reason: ").concat(t))}return{questions:s}}(e);s&&s.questions&&0!==s.questions.length?(t(s),console.log("Parsed Quiz:",s)):(c("Could not parse any valid questions from the CSV. Please check the file format."),t(null)),o(!1)},500)}catch(e){console.error("Error parsing CSV:",e),c(e instanceof Error?e.message:"An unknown error occurred during parsing."),t(null),o(!1)}},onFileRejected:e=>{c("File rejected: ".concat(e)),t(null),i(null),o(!1)},isLoading:a})}),l&&(0,r.jsxs)(Z,{variant:"destructive",className:"mb-8",children:[(0,r.jsx)(D.A,{className:"h-4 w-4"}),(0,r.jsx)(ee,{children:"Parsing Error"}),(0,r.jsx)(et,{children:l})]}),e&&!l&&(0,r.jsxs)("section",{children:[(0,r.jsxs)("div",{className:"mb-6 p-4 border border-green-300 bg-green-50 rounded-md flex items-center",children:[(0,r.jsx)(es.A,{className:"h-5 w-5 mr-3 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-green-800",children:["Quiz Preview: ",s]}),(0,r.jsxs)("p",{className:"text-sm text-green-700",children:[e.questions.length," question",1!==e.questions.length?"s":""," loaded."]})]})]}),e.questions.map((e,t)=>(0,r.jsx)(X,{question:e,index:t},"".concat(t,"-").concat(e.id||e.title)))]}),!e&&!l&&!a&&(0,r.jsx)("div",{className:"text-center text-muted-foreground mt-12",children:(0,r.jsx)("p",{children:"Upload a Brightspace quiz CSV file to begin the preview."})})]})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),n=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[65,188,441,684,358],()=>t(698)),_N_E=e.O()}]);